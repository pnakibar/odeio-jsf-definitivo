<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui"
      xmlns:a="http://xmlns.jcp.org/jsf/passthrough"
>

<h:head>
  <ui:composition template="templates/commonHead.xhtml" />
  <link rel="stylesheet" href="resources/css/login.css" />
</h:head>

<body class="login">
  <div class="background-image"></div>
  <!-- Fixed navbar -->
  <div class="container">
    <img class="media-object mylogo" src="resources/img/logo.png" alt="Logo beerzeit drink and club" />
    <div id="loginbox" class="mainbox col-md-6 col-md-offset-3 col-sm-8 col-sm-offset-2">
      <div class="panel panel-info myborder">
        <div class="myheading  myborder panel-heading">
          <div class="panel-title">Login</div>
        </div>

        <div style="padding-top:30px" class="panel-body">
          <h:messages></h:messages>
          <div style="display:none" id="login-alert" class="alert alert-danger col-sm-12"></div>

          <h:form id="loginform" class="form-horizontal">
            <div style="margin-bottom: 25px" class="input-group">
              <span class="input-group-addon"><i class="glyphicon glyphicon-user"></i></span>
              <h:inputText id="login-username" type="text" class="form-control" name="username" value="#{user.email}" a:placeholder="Email" />
            </div>

            <div style="margin-bottom: 25px" class="input-group">
              <span class="input-group-addon"><i class="glyphicon glyphicon-lock"></i></span>
              <h:inputSecret id="login-password" type="password" class="form-control" name="password" value="#{user.password}" a:placeholder="Senha" />
            </div>


            <div style="margin-top:10px" class="form-group">
              <!-- Button -->

              <div class="col-sm-12 controls">
                <h:commandButton id="btn-login" class="btn btn-success" action="#{user.login}" value="Login"></h:commandButton>
                <!-- <a id="btn-login" href="index.xhtml" class="btn btn-success">Login</a> -->
              </div>
            </div>

            <div class="form-group">
              <div class="col-md-12 control">
                <div style="border-top: 1px solid#888; padding-top:15px; font-size:85%">
                  Não tem uma conta?
                  <a href="#" onClick="$('#loginbox').hide(); $('#signupbox').show()">
                      Registre-se aqui!
                  </a>
                </div>
              </div>
            </div>
          </h:form>



        </div>
      </div>
    </div>

    <div id="signupbox" style="display:none;" class="mainbox col-md-6 col-md-offset-3 col-sm-8 col-sm-offset-2">

      <div class="panel panel-info myborder">
        <div class="panel-heading myborder myheading">
          <div class="panel-title">Registro</div>
          <div style="float:right; font-size: 85%; position: relative; top:-10px"><a style="color: white;" id="signinlink" href="#" onclick="$('#signupbox').hide(); $('#loginbox').show()">Faça o login</a></div>
        </div>
        <div class="panel-body">
          <h:form enctype="multipart/form-data" id="signupform" class="form-horizontal" action="login.xhtml">
            <div class="form-group">
              <label class="col-md-3 control-label">Email<i class="required-mark">*</i></label>
              <div class="col-md-9">
                <!-- <input type="text" class="form-control" name="email" placeholder="Endereço de Email" /> -->
                <h:inputText id="signup-email" type="text" class="form-control" name="email" value="#{user.email}" a:placeholder="Endereço de email">
                  <f:validateRequired/>
                  <p:ajax event="blur" update="btn-signup" />
                </h:inputText>
              </div>
            </div>

            <div class="form-group">
              <label class="col-md-3 control-label">Nome completo<i class="required-mark">*</i></label>
              <div class="col-md-9">
                <!-- <input type="text" class="form-control" name="firstname" placeholder="Nome completo" /> -->
                <h:inputText id="signup-fullname" type="text" class="form-control" name="fullname" value="#{user.fullname}" a:placeholder="Nome completo">
                  <f:validateRequired/>
                  <p:ajax event="blur" update="btn-signup" />
                </h:inputText>
              </div>
            </div>
            <div class="form-group">
              <label class="col-md-3 control-label">Nome de usuario<i class="required-mark">*</i></label>
              <div class="col-md-9">
                <!-- <input type="text" class="form-control" name="username" placeholder="nomedeusuario" /> -->
                <h:inputText id="signup-username" type="text" class="form-control" name="username" value="#{user.username}" a:placeholder="Nome de usuario">
                  <f:validateRequired></f:validateRequired>
                  <p:ajax event="blur" update="btn-signup" />
                </h:inputText>
              </div>
            </div>
            <div class="form-group">
              <label class="col-md-3 control-label">Senha<i class="required-mark">*</i></label>
              <div class="col-md-9">
                <!-- <input type="password" class="form-control" name="passwd" placeholder="Senha" /> -->
                <h:inputText id="signup-password" type="text" class="form-control" name="password" value="#{user.password}" a:placeholder="Senha">
                  <f:validateRequired></f:validateRequired>
                  <p:ajax event="blur" update="btn-signup" />
                </h:inputText>
              </div>
            </div>
            <div class="form-group">
              <label class="col-md-3 control-label">Confirme a sua senha<i class="required-mark">*</i></label>
              <div class="col-md-9">
                <!-- <input type="password" class="form-control" name="passwd" placeholder="Confirme a sua senha" /> -->
                <h:inputText id="signup-confirm-password" type="text" class="form-control" name="password-confirmation" value="#{user.confirmpassword}" a:placeholder="Confirme sua senha">
                  <f:validateRequired></f:validateRequired>
                  <p:ajax event="blur" update="btn-signup" />
                </h:inputText>
              </div>
            </div>

            <div class="form-group">
              <label class="col-md-3 control-label">Data de Nascimento<i class="required-mark">*</i></label>
              <div class="col-md-9">
                <!--<input type="date" class="form-control" name="date-of-birth" />-->
                <h:inputText id="signup-date-of-birth" type="text" class="form-control" name="date-of-birth" value="#{user.dateofbirth}" a:placeholder="Data de nascimento">
                  <f:validateRequired></f:validateRequired>
                  <p:ajax event="blur" update="btn-signup" />
                </h:inputText>
              </div>
            </div>

            <div class="form-group">
              <label class="col-md-3 control-label">Foto</label>
              <div class="col-md-9">
                <!--<input type="date" class="form-control" name="date-of-birth" />-->
                <p:fileUpload value="#{user.avatar}" mode="simple"></p:fileUpload>
              </div>
            </div>

            <!-- <div class="form-group"> -->
              <!-- Button -->
              <div class="col-md-offset-3 col-md-9">
                <!-- <button id="btn-signup" type="submit" class="btn btn-success"><i class="icon-hand-right"></i>Registrar</button> -->
                <h:commandButton id="btn-signup" class="btn btn-success" disabled="#{user.isDisabled()}" action="#{user.signup}" value="Registrar" />
              </div>
            <!-- </div> -->
          </h:form>
        </div>
      </div>

    </div>
  </div>
  <script src="resources/js/jquery.min.js" />
</body>

</html>
